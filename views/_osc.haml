%table.table.table-striped
  %thead
    %tr
      %th
        %a{:href => "http://www.kabuciao.com/tech/oscillator/rsi.html", :target => "_blank"}
          =h "RSI9"
      %th
        %a{:href => "http://www.kabuciao.com/tech/oscillator/rsi.html", :target => "_blank"}
          =h "RSI14"
      %th
        %a{:href => "http://www.kabuciao.com/tech/oscillator/mfi.html", :target => "_blank"}
          =h "MFI"
      %th
        %a{:href => "http://www.kabuciao.com/tech/oscillator/roc.html", :target => "_blank"}
          =h "ROC"
      %th
        %a{:href => "http://www.kabuciao.com/tech/oscillator/cci.html", :target => "_blank"}
          =h "CCI"
      %th
        %a{:href => "http://www.kabuciao.com/tech/oscillator/kyukyoku.html", :target => "_blank"}
          =h "UO"
      %th
        %a{:href => "http://www.kabuciao.com/tech/oscillator/stokyasu.html", :target => "_blank"}
          =h "SLOWK"
      %th
        %a{:href => "http://www.kabuciao.com/tech/oscillator/stokyasu.html", :target => "_blank"}
          =h "SLOWD"
      %th
        %a{:href => "http://www.kabuciao.com/tech/oscillator/stokyasu.html", :target => "_blank"}
          =h "FASTK"
      %th
        %a{:href => "http://www.kabuciao.com/tech/oscillator/stokyasu.html", :target => "_blank"}
          =h "FASTD"
      %th
        %a{:href => "http://www.kabuciao.com/tech/trend/macd.html", :target => "_blank"}
          =h "MACD"
      %th
        %a{:href => "http://www.kabuciao.com/tech/trend/macd.html", :target => "_blank"}
          =h "SIG"
      %th
        %a{:href => "http://www.kabuciao.com/tech/trend/macd.html", :target => "_blank"}
          =h "HIST"
      %th
        %a{:href => "http://www.kabuciao.com/tech/oscillator/momen.html", :target => "_blank"}
          =h "MOM10"
      %th
        %a{:href => "http://www.kabuciao.com/tech/oscillator/momen.html", :target => "_blank"}
          =h "MOM25"
      %th
        %a{:href => "http://www.sevendata.co.jp/shihyou/jukyuu/volla.html", :target => "_blank"}
          =h "VL"
      %th
        %a{:href => "http://www.moneypartners.co.jp/support/tech/atr.html", :target => "_blank"}
          =h "ATR"
      %th RET
  %tbody
    - @data.last(3).each do |row|
      %tr
        %td
          - rsi9 = row[:rsi9].to_f
          - if rsi9 >= 70
            %div{style: 'color: red;'}
              =h rsi9.round(2)
          - elsif rsi9 <= 30
            %div{style: 'color: blue;'}
              =h rsi9.round(2)
          - else
            =h rsi9.round(2)
        %td
          - rsi14 = row[:rsi14].to_f
          - if rsi14 >= 70
            %div{style: 'color: red;'}
              =h rsi14.round(2)
          - elsif rsi14 <= 30
            %div{style: 'color: blue;'}
              =h rsi14.round(2)
          - else
            =h rsi14.round(2)
        %td
          - mfi = row[:mfi].to_f
          - if mfi >= 80
            %div{style: 'color: red;'}
              =h mfi.round(2)
          - elsif mfi <= 20
            %div{style: 'color: blue;'}
              =h mfi.round(2)
          - else
            =h mfi.round(2)
        %td
          - roc = row[:roc].to_f
          - if roc >= 0
            %div{style: 'color: red;'}
              =h roc.round(2)
          - else
            %div{style: 'color: blue;'}
              =h roc.round(2)
        %td
          - cci = row[:cci].to_f
          - if cci >= 100
            %div{style: 'color: red;'}
              =h cci.round(2)
          - elsif cci <= -100
            %div{style: 'color: blue;'}
              =h cci.round(2)
          - else
            =h cci.round(2)
        %td
          - ultosc = row[:ultosc].to_f
          - if ultosc >= 70
            %div{style: 'color: red;'}
              =h ultosc.round(2)
          - elsif ultosc <= 35
            %div{style: 'color: blue;'}
              =h ultosc.round(2)
          - else
            =h ultosc.round(2)
        %td
          - slowk = row[:slowk].to_f
          - if slowk >= 80
            %div{style: 'color: red;'}
              =h slowk.round(2)
          - elsif slowk <= 20
            %div{style: 'color: blue;'}
              =h slowk.round(2)
          - else
            =h slowk.round(2)
        %td
          - slowd = row[:slowd].to_f
          - if slowd >= 80
            %div{style: 'color: red;'}
              =h slowd.round(2)
          - elsif slowd <= 20
            %div{style: 'color: blue;'}
              =h slowd.round(2)
          - else
            =h slowd.round(2)
        %td
          - fastk = row[:fastk].to_f
          - if fastk >= 80
            %div{style: 'color: red;'}
              =h fastk.round(2)
          - elsif fastk <= 20
            %div{style: 'color: blue;'}
              =h fastk.round(2)
          - else
            =h fastk.round(2)
        %td
          - fastd = row[:fastd].to_f
          - if fastd >= 80
            %div{style: 'color: red;'}
              =h fastd.round(2)
          - elsif fastd <= 20
            %div{style: 'color: blue;'}
              =h fastd.round(2)
          - else
            =h fastd.round(2)
        %td
          - macd = row[:macd].to_f
          - if macd >= 0
            %div{style: 'color: red;'}
              =h macd.round(2)
          - else
            %div{style: 'color: blue;'}
              =h macd.round(2)
        %td
          =h row[:macdsignal].to_f.round(2)
        %td
          =h row[:macdhist].to_f.round(2)
        %td
          - mom10 = row[:mom10].to_f
          - if mom10 >= 0
            %div{style: 'color: red;'}
              =h mom10.round(2)
          - else
            %div{style: 'color: blue;'}
              =h mom10.round(2)
        %td
          - mom25 = row[:mom25].to_f
          - if mom25 >= 0
            %div{style: 'color: red;'}
              =h mom25.round(2)
          - else
            %div{style: 'color: blue;'}
              =h mom25.round(2)
        %td
          - vl = row[:vl].to_f
          - if vl >= 5
            %div{style: 'color: red;'}
              =h vl.round(2)
          - else
            =h vl.round(2)
        %td
          =h row[:atr].to_f.round(2)
        %td
          - ret_index = row[:ret_index].to_f
          - if ret_index >= 1.2
            %div{style: 'color: red;'}
              =h ret_index.round(2)
          - elsif ret_index <= 0.9
            %div{style: 'color: blue;'}
              =h ret_index.round(2)
          - else
            =h ret_index.round(2)
